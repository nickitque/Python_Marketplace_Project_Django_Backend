{% extends 'core/base.html' %}

{% block title %} {{ post.title }} {% endblock %}
{% block content %}
{% block page_title %}

<div class="container mx-auto">
{% endblock page_title %}


{% block page_content %}



<!--<div class="relative isolate overflow-hidden bg-white px-6 py-24 sm:py-32 lg:overflow-visible lg:px-0">-->
  <div class="absolute -z-10 overflow-hidden">
    <svg class="absolute left-[max(50%,25rem)] top-0 h-[64rem] w-[128rem] -translate-x-1/2 stroke-gray-200 [mask-image:radial-gradient(64rem_64rem_at_top,white,transparent)]" aria-hidden="true">
      <defs>
        <pattern id="e813992c-7d03-4cc4-a2bd-151760b470a0" width="200" height="200" x="50%" y="-1" patternUnits="userSpaceOnUse">
          <path d="M100 200V.5M.5 .5H200" fill="none" />
        </pattern>
      </defs>
      <svg x="50%" y="-1" class="overflow-visible fill-gray-50">
        <path d="M-100.5 0h201v201h-201Z M699.5 0h201v201h-201Z M499.5 400h201v201h-201Z M-300.5 600h201v201h-201Z" stroke-width="0" />
      </svg>
      <rect width="100%" height="100%" stroke-width="0" fill="url(#e813992c-7d03-4cc4-a2bd-151760b470a0)" />
    </svg>
  </div>
  <div class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 lg:mx-0 lg:max-w-none lg:grid-cols-3 lg:items-start lg:gap-y-10">
    <div class="lg:col-span-2 lg:col-start-1 lg:row-start-1 lg:mx-auto lg:grid lg:w-full lg:max-w-7xl lg:grid-cols-1 lg:gap-x-8 lg:px-8">
      <div class="lg:pr-4">
        <div class="">
            <p>{{ post.created_on.date }}</p>
        <!--Like Button-->
        <a href="like/"><button type="button" class="ml-5 mt-2 pr-2 text-blue-700 border border-blue-700 hover:bg-blue-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-full text-sm p-1 text-center inline-flex items-center dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:focus:ring-blue-800 dark:hover:bg-blue-500">
        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"></path></svg>
        <span class="sr-only">Like</span><p class="ml-1">{{ post.likes.count }}</p></button></a>
      <!-- Like btn -->
            <a id="{{ post.slug }}" href="" class="btn-post-like">
          <span class="relative z-10 rounded-full bg-gray-50 px-3 py-1.5 font-medium text-gray-600 hover:bg-gray-100">
        <button>
            <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" {% if logged_user in post.likes.all %} {% else %} fill="none" {% endif %} viewBox="1 -4 25 25" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"></path></svg>
        </button>{{ post.likes.count }}</span></a>
                  <!--End like btn -->


          <h1 class="mt-2 text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"> {{ post.title }}</h1>
            <img class="h-90 max-w-lg mb-4 mt-4" src="{{ post.image_url|default_if_none:'/media/item_images/default.png' }}">
            <div class="text-base leading-7 text-gray-700">
            {{ post.body | safe }}


                <!--Gallery section -->

                <section class="text-gray-600 body-font">
  <div class="container py-14 mx-auto flex flex-wrap">
    <div class="flex w-full mb-10 flex-wrap">
      <h1 class="sm:text-3xl text-2xl font-medium title-font text-gray-900 lg:w-1/3 lg:mb-0 mb-4">Фотоотчет с мероприятия</h1>
      <p class="lg:pl-6 lg:w-2/3 mx-auto leading-relaxed text-base">Whatever cardigan tote bag tumblr hexagon brooklyn asymmetrical gentrify, subway tile poke farm-to-table. Franzen you probably haven't heard of them man bun deep jianbing selfies heirloom.</p>
    </div>
    <div class="flex flex-wrap md:-m-2 -m-1">
      <div class="flex flex-wrap w-1/2">
        <div class="md:p-2 p-1 w-1/2">
          <img alt="gallery" class="w-full object-cover h-full object-center block" src="https://dummyimage.com/500x300">
        </div>
        <div class="md:p-2 p-1 w-1/2">
          <img alt="gallery" class="w-full object-cover h-full object-center block" src="https://dummyimage.com/501x301">
        </div>
        <div class="md:p-2 p-1 w-full">
          <img alt="gallery" class="w-full h-full object-cover object-center block" src="https://dummyimage.com/600x360">
        </div>
      </div>
      <div class="flex flex-wrap w-1/2">
        <div class="md:p-2 p-1 w-full">
          <img alt="gallery" class="w-full h-full object-cover object-center block" src="https://dummyimage.com/601x361">
        </div>
        <div class="md:p-2 p-1 w-1/2">
          <img alt="gallery" class="w-full object-cover h-full object-center block" src="https://dummyimage.com/502x302">
        </div>
        <div class="md:p-2 p-1 w-1/2">
          <img alt="gallery" class="w-full object-cover h-full object-center block" src="https://dummyimage.com/503x303">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- End gallery section -->


                 <p class="mt-4">Et vitae blandit facilisi magna lacus commodo. Vitae sapien duis odio id et. Id blandit molestie auctor fermentum dignissim. Lacus diam tincidunt ac cursus in vel. Mauris varius vulputate et ultrices hac adipiscing egestas. Iaculis convallis ac tempor et ut. Ac lorem vel integer orci.</p>
          <h2 class="mt-6 text-2xl font-bold tracking-tight text-gray-900">No server? No problem.</h2>
          <p class="mt-6">Id orci tellus laoreet id ac. Dolor, aenean leo, ac etiam consequat in. Convallis arcu ipsum urna nibh. Pharetra, euismod vitae interdum mauris enim, consequat vulputate nibh. Maecenas pellentesque id sed tellus mauris, ultrices mauris. Tincidunt enim cursus ridiculus mi. Pellentesque nam sed nullam sed diam turpis ipsum eu a sed convallis diam.</p>

            </div>
        </div>
      </div>
    </div>

      <!--paste here-->
      <div class="lg:sticky top-0 lg:pr-4">
        <div class="lg:top-4 lg:col-start-2 lg:row-span-2 lg:row-start-1 lg:overflow-hidden">
            {% for category in post.categories.all %}
            <h2 class="text-xl font-bold tracking-tight text-gray-900 mb-3">Другие посты в категории <a href="{% url 'blog:blog_category' category.name %}" class="font-semibold leading-7 text-indigo-600">{{ category.name }}</a></h2>


            <a class="mt-5 line-clamp-3 text-sm leading-6 text-gray-600"></a>
            {% endfor %}


            {% for post in related_posts %}
               <div class="p-2 w-full">
                   <a href="{% url 'blog:blogpost_detail' post.slug %}">
                    <div class="h-full flex items-center border-gray-200 border p-4 rounded-lg">
                      <img class="w-16 h-16 bg-gray-100 object-cover object-center flex-shrink-0 rounded-full mr-3" src="{{ post.image.url }}">
                      <div class="flex-grow">
                        <h2 class="text-gray-900 title-font font-medium">{{ post.title }}</h2>
                        <p class="text-gray-500 text-sm">{{ post.body | safe | slice:":70" }}...</p>
                      </div>
                    </div>
                   </a>
              </div>
            {% endfor %}

        </div>
      </div>



  </div>
</div>






<section class="bg-white dark:bg-gray-900 antialiased">
  <div class="max-w-2xl mx-auto px-4">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-lg lg:text-2xl font-bold text-gray-900 dark:text-white">Комментарии ({{ comments.count }})</h2>
    </div>
                    {% if request.user.is_authenticated %}
    <form method="post" class="mb-6">
        {% csrf_token %}
        <div class="py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-400 dark:bg-gray-800 dark:border-gray-700">{{ comment_form.author }}</div>
        <div class="py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-400 dark:bg-gray-800 dark:border-gray-700">{{ comment_form.body }}
        <input type="hidden" name="post_id" id="post_id" value="{{ post.id }}"></div>
        <button type="submit"
            class="inline-flex items-center py-2.5 px-4 text-xs font-medium text-center bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800">
            Отправить
        </button>
    </form>

      {% endif %}

              {% for comment in comments %}
    <div class="p-6 text-base bg-white border-t border-gray-200 dark:border-gray-700 dark:bg-gray-900">
        <div class="flex justify-between items-center mb-2">
            <div class="flex items-center">
                <p class="inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold"><img
                        class="mr-2 w-6 h-6 rounded-full"
                        src="https://flowbite.com/docs/images/people/profile-picture-4.jpg"
                        alt="{{ comment.author }}">{{ comment.author }}</p>
                <p class="text-sm text-gray-600 dark:text-gray-400"> {{ comment.created_on }}</p>
            </div>
        </div>
        <p class="text-gray-700 dark:text-gray-400">{{ comment.body }}</p>
        <div class="flex items-center mt-4 space-x-4">
            <button type="button"
                class="flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400 font-medium">
            <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg"  fill="none" viewBox="1 0 25 25" stroke-width="1.5" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"></path></svg>
                Лайк
            </button>
<!--            <button type="button"-->
<!--                class="flex items-center text-sm text-gray-500 hover:underline dark:text-gray-400 font-medium">-->
<!--                <svg class="mr-1.5 w-3.5 h-3.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 18">-->
<!--                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5h5M5 8h2m6-3h2m-5 3h6m2-7H2a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h3v5l5-5h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1Z"/>-->
<!--                </svg>-->
<!--                Ответить-->
<!--            </button>-->
        </div>
    </div>
              {% endfor %}


  </div>
</section>





{% endblock page_content %}
{% endblock %}